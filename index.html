<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Espresso Systems World Map</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
:root{
  --chocolate:#6b3e2e;
  --cookie:#d2b48c;
  --vanilla:#f3e5ab;
  --header-bg:linear-gradient(90deg,#6b3e2e,#d2b48c);
  --card-bg:#fff8dc;
  --body-bg:#fbe9dd;
  --muted:#8a5b47;
}
body{
  margin:0;
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--body-bg);
  color:#6b3e2e;
}
#header{
  display:flex;
  align-items:center;
  padding:20px 28px 10px 28px;
  background:var(--header-bg);
  box-shadow:0 2px 8px rgba(0,0,0,0.18);
}
.logo{
  width:40px;height:40px;margin-right:16px;border-radius:8px;object-fit:contain;
}
.title{
  font-size:22px;
  font-weight:bold;
  letter-spacing:1px;
  color:var(--chocolate);
}
#map{
  width:100vw;
  height:480px;
  border-bottom:1px solid #d2b48c;
  box-shadow:0 4px 16px rgba(0,0,0,0.13);
  margin-bottom:0;
  border-radius:12px;
}
.nav-buttons{
  text-align:center;
  margin:18px 0 2px 0;
}
.nav-buttons button{
  background:var(--chocolate);
  color:#fff;
  border:none;
  padding:8px 20px;
  margin:0 8px;
  border-radius:6px;
  font-size:17px;
  cursor:pointer;
  transition:background 0.2s;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
}
.nav-buttons button:hover{
  background:var(--cookie);
  color:var(--chocolate);
}
.event-cards{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:16px;
  padding:12px 0 32px 0;
  background:var(--vanilla);
}
.event-card{
  background:var(--card-bg);
  color:var(--chocolate);
  border-radius:10px;
  box-shadow:0 2px 8px rgba(0,0,0,0.13);
  padding:16px;
  width:220px;
  min-height:260px;
  text-align:left;
  transition:box-shadow 0.2s,border 0.2s;
  cursor:pointer;
  border:1px solid var(--cookie);
}
.event-card.selected{
  box-shadow:0 0 0 3px var(--muted);
  border:1.5px solid var(--muted);
}
.event-card h4{
  margin:0 0 8px 0;
  color:var(--chocolate);
  font-size:18px;
  font-weight:bold;
}
.event-card img{
  border-radius:7px;
  width:100%;
  margin:10px 0 7px 0;
  background:var(--vanilla);
  box-shadow:0 1px 5px rgba(0,0,0,0.08);
}
.event-card .desc{
  font-size:14px;
  color:var(--muted);
  margin-top:6px;
}
.leaflet-popup-content img{
  max-width:180px;
  border-radius:5px;
  margin-bottom:6px;
  background:var(--vanilla);
}
@media(max-width:880px){
  #map{height:340px;}
  .event-card{width:48%;}
}
@media(max-width:480px){
  #header{padding:10px;}
  .logo{width:30px;height:30px;}
  .title{font-size:16px;}
  #map{height:220px;}
  .event-card{width:100%;}
}
  </style>
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <div id="header">
    <img class="logo" src="images/logo.png" alt="Logo" />
    <span class="title">Espresso Systems World Map</span>
  </div>
  <div id="map"></div>
  <div class="nav-buttons">
    <button onclick="prevEvent()">← Previous</button>
    <button onclick="nextEvent()">Next →</button>
  </div>
  <div class="event-cards" id="eventCards">
    <!-- Event cards will be injected by JS -->
  </div>
  <script>
    // Example data for 3 events
    const events = [
      {
        name: "Composability Day",
        city: "Denver, USA",
        date: "Feb 2024",
        desc: "A day focused on blockchain composability.",
        img: "images/denver.png",
        latlng: [39.7392, -104.9903]
      },
      {
        name: "San Francisco Meetup",
        city: "San Francisco, USA",
        date: "May 2024",
        desc: "Meetup for Espresso Systems enthusiasts.",
        img: "images/san-francisco.png",
        latlng: [37.7749, -122.4194]
      },
      {
        name: "NYC Blockchain Expo",
        city: "New York, USA",
        date: "Sep 2024",
        desc: "Blockchain expo in New York City.",
        img: "images/new-york.png",
        latlng: [40.7128, -74.0060]
      }
    ];

    let map;
    let markers = [];
    let selectedIndex = 0;

    function initMap() {
      map = L.map('map').setView([39.5, -98.35], 4);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Leaflet | © OSM'
      }).addTo(map);

      events.forEach((event, i) => {
        const marker = L.marker(event.latlng).addTo(map);
        marker.on('click', () => selectEvent(i));
        marker.bindPopup(`<b>${event.name}</b><br>${event.city}<br><img src="${event.img}" alt="${event.name}" />`);
        markers.push(marker);
      });
    }

    function renderCards() {
      const container = document.getElementById('eventCards');
      container.innerHTML = '';
      events.forEach((event, i) => {
        const card = document.createElement('div');
        card.className = "event-card" + (selectedIndex === i ? " selected" : "");
        card.onclick = () => selectEvent(i);
        card.innerHTML = `
          <h4>${event.name}</h4>
          <img src="${event.img}" alt="${event.name}" />
          <div><strong>City:</strong> ${event.city}</div>
          <div><strong>Date:</strong> ${event.date}</div>
          <div class="desc">${event.desc}</div>
        `;
        container.appendChild(card);
      });
    }

    function selectEvent(idx) {
      selectedIndex = idx;
      renderCards();
      map.setView(events[idx].latlng, 6);
      markers[idx].openPopup();
    }

    function prevEvent() {
      selectedIndex = (selectedIndex - 1 + events.length) % events.length;
      selectEvent(selectedIndex);
    }
    function nextEvent() {
      selectedIndex = (selectedIndex + 1) % events.length;
      selectEvent(selectedIndex);
    }

    window.onload = () => {
      initMap();
      renderCards();
      selectEvent(0); // Select first event by default
    };
  </script>
</body>
</html>